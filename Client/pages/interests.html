<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interests - NewsHub</title>
    <link rel="icon" href="../assets/favicon.ico" type="image/x-icon">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">

    <!-- Firebase Configuration -->
    <script type="module">
        import('../js/firebase-config.js').then(module => {
            console.log('ðŸ”¥ Firebase loaded');
        }).catch(error => {
            console.error('ðŸ”¥ Firebase load error:', error);
        });
    </script>
</head>
<body>
    <div id="navbar-container"></div>

    <div class="container mt-4">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <!-- Interests Section -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h3>Choose Your News Interest</h3>
                        <p class="mb-0 text-muted">Select one category to personalize your news feed</p>
                    </div>
                    <div class="card-body">
                        <div class="row justify-content-center">
                            <div class="col-md-8">
                                <h5 class="mb-4">News Categories</h5>
                                <div id="newsCategories" class="mb-4">
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" name="interestCategory" value="general" id="int_general">
                                        <label class="form-check-label fw-semibold" for="int_general">
                                            <i class="fas fa-globe me-2 text-primary"></i>General News
                                        </label>
                                        <div class="text-muted small ms-4">Breaking news, politics, and current events</div>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" name="interestCategory" value="business" id="int_business">
                                        <label class="form-check-label fw-semibold" for="int_business">
                                            <i class="fas fa-chart-line me-2 text-success"></i>Business
                                        </label>
                                        <div class="text-muted small ms-4">Finance, markets, and business news</div>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" name="interestCategory" value="technology" id="int_technology">
                                        <label class="form-check-label fw-semibold" for="int_technology">
                                            <i class="fas fa-microchip me-2 text-info"></i>Technology
                                        </label>
                                        <div class="text-muted small ms-4">Tech innovation, gadgets, and digital trends</div>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" name="interestCategory" value="sports" id="int_sports">
                                        <label class="form-check-label fw-semibold" for="int_sports">
                                            <i class="fas fa-futbol me-2 text-warning"></i>Sports
                                        </label>
                                        <div class="text-muted small ms-4">Sports news, scores, and updates</div>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" name="interestCategory" value="health" id="int_health">
                                        <label class="form-check-label fw-semibold" for="int_health">
                                            <i class="fas fa-heart me-2 text-danger"></i>Health
                                        </label>
                                        <div class="text-muted small ms-4">Health, medical, and wellness news</div>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" name="interestCategory" value="entertainment" id="int_entertainment">
                                        <label class="form-check-label fw-semibold" for="int_entertainment">
                                            <i class="fas fa-film me-2 text-purple"></i>Entertainment
                                        </label>
                                        <div class="text-muted small ms-4">Movies, music, celebrities, and entertainment news</div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <hr>

                        <div class="d-flex justify-content-between">
                            <button class="btn btn-outline-secondary" id="resetInterests" disabled>
                                <i class="fas fa-times me-2"></i>Clear Preference
                            </button>
                            <button class="btn btn-primary" id="saveInterests" disabled>
                                <i class="fas fa-save me-2"></i>Save Interest
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Edit Profile Section -->
                <div class="card">
                    <div class="card-header">
                        <h3>Edit Profile</h3>
                        <p class="mb-0 text-muted">Update your account information</p>
                    </div>
                    <div class="card-body">
                        
                        <!-- User Stats Section -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h5 class="text-primary mb-3">
                                    <i class="fas fa-user-circle me-2"></i>Profile Overview
                                </h5>
                                
                                <div class="row">
                                    <!-- User Avatar & Level -->
                                    <div class="col-md-4 text-center mb-3">
                                        <div id="userAvatarSection" class="mb-3">
                                            <img id="userAvatar" src="../assets/default-avatar.png" 
                                                 alt="User Avatar" 
                                                 class="rounded-circle border border-3 border-primary mb-2" 
                                                 style="width: 80px; height: 80px; object-fit: cover;">
                                            <div id="userLevel" class="badge bg-primary fs-6 px-3 py-2 rounded-pill">
                                                <i class="fas fa-star me-1"></i>
                                                <span id="tierName">Member</span>
                                            </div>
                                        </div>
                                        <div id="activityProgress" class="mt-2">
                                            <small class="text-muted">Activity Points</small>
                                            <div class="progress mt-1" style="height: 8px;">
                                                <div id="activityBar" class="progress-bar bg-gradient bg-primary" 
                                                     role="progressbar" style="width: 0%"></div>
                                            </div>
                                            <small id="activityText" class="text-muted">Points tracking requires backend</small>
                                        </div>
                                    </div>
                                    
                                    <!-- Following Stats -->
                                    <div class="col-md-4 text-center mb-3">
                                        <h6 class="text-muted mb-3">
                                            <i class="fas fa-user-friends me-1"></i>Community
                                        </h6>
                                        <div id="followingStatsSection">
                                            <div class="row text-center">
                                                <div class="col-6">
                                                    <div class="border rounded p-2">
                                                        <h6 class="mb-1" id="followingCount">0</h6>
                                                        <small class="text-muted">Following</small>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="border rounded p-2">
                                                        <h6 class="mb-1" id="followersCount">0</h6>
                                                        <small class="text-muted">Followers</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- User Achievements -->
                                    <div class="col-md-4 text-center mb-3">
                                        <h6 class="text-muted mb-3">
                                            <i class="fas fa-trophy me-1"></i>Achievements
                                        </h6>
                                        <div id="userAchievements">
                                            <div class="p-3 bg-light rounded">
                                                <div id="likesReceived" class="h4 text-warning mb-1">0</div>
                                                <small class="text-muted">Likes Received</small>
                                            </div>
                                            <div class="mt-2">
                                                <small id="memberSince" class="text-muted">Loading...</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <hr>
                            </div>
                        </div>

                        <form id="editProfileForm">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="firstName" class="form-label">First Name</label>
                                    <input type="text" class="form-control" id="firstName" name="firstName" required maxlength="50">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="lastName" class="form-label">Last Name</label>
                                    <input type="text" class="form-control" id="lastName" name="lastName" required maxlength="50">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="editUsername" class="form-label">Username</label>
                                    <input type="text" class="form-control" id="editUsername" name="editUsername" required maxlength="50">
                                    <div class="form-text text-danger" id="usernameError" style="display: none;">Username must be unique</div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="editEmail" class="form-label">Email</label>
                                    <input type="email" class="form-control" id="editEmail" name="editEmail" required maxlength="100">
                                    <div class="form-text text-danger" id="emailError" style="display: none;">Email must be unique</div>
                                </div>
                            </div>
                            
                            <!-- Password Update Section -->
                            <div class="col-12">
                                <hr class="my-4">
                                <h5 class="text-primary mb-3">
                                    <i class="fas fa-lock me-2"></i>Password Update
                                </h5>
                                <p class="text-muted small mb-3">Leave blank if you don't want to change your password</p>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="newPassword" class="form-label">New Password</label>
                                        <input type="password" class="form-control" id="newPassword" name="newPassword" minlength="6" maxlength="50">
                                        <div class="form-text">Minimum 6 characters</div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="confirmPassword" class="form-label">Confirm New Password</label>
                                        <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" minlength="6" maxlength="50">
                                        <div class="form-text text-danger" id="passwordError" style="display: none;">Passwords do not match</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Notification Preferences Section -->
                            <div class="col-12">
                                <hr class="my-4">
                                <h5 class="text-primary mb-3">
                                    <i class="fas fa-bell me-2"></i>Notification Preferences
                                </h5>
                                <p class="text-muted small mb-3">Choose when you want to receive push notifications</p>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="notifyOnLikes" name="notifyOnLikes" checked>
                                            <label class="form-check-label" for="notifyOnLikes">
                                                <i class="fas fa-thumbs-up me-2 text-primary"></i>
                                                <strong>Like Notifications</strong>
                                                <div class="text-muted small">Get notified when someone likes your posts</div>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6 mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="notifyOnComments" name="notifyOnComments" checked>
                                            <label class="form-check-label" for="notifyOnComments">
                                                <i class="fas fa-comment me-2 text-info"></i>
                                                <strong>Comment Notifications</strong>
                                                <div class="text-muted small">Get notified when someone comments on your posts</div>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="notifyOnFollows" name="notifyOnFollows" checked>
                                            <label class="form-check-label" for="notifyOnFollows">
                                                <i class="fas fa-user-plus me-2 text-success"></i>
                                                <strong>Follow Notifications</strong>
                                                <div class="text-muted small">Get notified when someone follows you</div>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6 mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="notifyOnShares" name="notifyOnShares" checked>
                                            <label class="form-check-label" for="notifyOnShares">
                                                <i class="fas fa-share me-2 text-warning"></i>
                                                <strong>Share Notifications</strong>
                                                <div class="text-muted small">Get notified when people you follow share articles</div>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <hr>
                            
                            <div class="d-flex justify-content-between">
                                <button type="button" class="btn btn-outline-secondary" id="cancelEdit">
                                    <i class="fas fa-times me-2"></i>Cancel
                                </button>
                                <button type="submit" class="btn btn-success" id="saveProfile">
                                    <i class="fas fa-save me-2"></i>Save Changes
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="../ajaxCalls.js"></script>
    <script src="../js/common.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/interests.js"></script>
</body>
</html>